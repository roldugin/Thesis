%% Conditional preamble inclusion.
%% \input{preamble.tex} when building when building the complete thesis or its individual chapters.

\ifdefined\PREAMBLE
%% DEBUG: Preamble skipped
\else

\newcommand*{\PREAMBLE}{} %% Mark preamble as included

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% The preamble goes here and must end with \begin{document}
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,a4paper,british]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{luainputenc}
\usepackage{listings}
\usepackage{verbatim}
\usepackage{varioref}
\usepackage{refstyle}
\usepackage{textcomp}
\usepackage{amstext}
\usepackage{graphicx}
\usepackage{babel}
\usepackage[margin=2cm]{geometry}
\usepackage[export]{adjustbox}
\usepackage{listings}
\usepackage{subfiles}
\usepackage{setspace}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{syntax}
\usepackage{xspace}
\usepackage[disable]{todonotes}
%%\usepackage[charter]{mathdesign}  % sets the math font
%%\usepackage{fontspec}
%%\setmainfont{Charis SIL}          % sets the document font

%% Packages included in this distribution
\usepackage{subsections}

\lstset{language=Haskell, columns=fixed, basewidth=.5em}

\renewcommand{\baselinestretch}{1.5}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.

\AtBeginDocument{\providecommand\subref[1]{\ref{sub:#1}}}
\DeclareRobustCommand{\greektext}{%
  \fontencoding{LGR}\selectfont\def\encodingdefault{LGR}}
\DeclareRobustCommand{\textgreek}[1]{\leavevmode{\greektext #1}}
\DeclareFontEncoding{LGR}{}{}
\DeclareTextSymbol{\~}{LGR}{126}
%% Because html converters don't know tabularnewline
\providecommand{\tabularnewline}{\\}
\RS@ifundefined{subref}
  {\def\RSsubtxt{section~}\newref{sub}{name = \RSsubtxt}}
  {}
\RS@ifundefined{thmref}
  {\def\RSthmtxt{theorem~}\newref{thm}{name = \RSthmtxt}}
  {}
\RS@ifundefined{lemref}
  {\def\RSlemtxt{lemma~}\newref{lem}{name = \RSlemtxt}}
  {}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% END LyX specific LaTeX commands.

\makeatother

\input{minimal_syntax.tex}

\input{itemize_md.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%% Shortcuts.

\def\compose{$\circ$ }

\newcommand\LiveFusion{\name{LiveFusion}}
\newcommand\Loop{\name{Loop}}
\newcommand\C{\name{C}}
\newcommand\Haskell{\name{Haskell}}
\newcommand\name[1]{\textsl{#1}\xspace}


%% The following shortcut does not work with caption for some reason
\newenvironment
  {cfigure}[1]
  {
    \def\TEMPCAPTION{#1}
    \begin{figure}
  }
  {
    \caption{\TEMPCAPTION}
    \end{figure}
  }


%%%%%%%%%%%%%%%%%%%%%%%%%%%% END Shortcuts.


%%%%%%%%%%%%%%%%%%%%%%%%%%%% Environments.

%% C code block without a figure box
\lstnewenvironment
  {ccode}[1]
  {\singlespacing\lstset{basicstyle={\ttfamily}, language=C, tabsize=4, #1}}
  {}

%% C code block with a figure box
\lstnewenvironment
  {ccode2}[2]
  {\singlespacing\lstset{basicstyle={\ttfamily}, language=C, tabsize=4, label=#1, caption=#2}}
  {}

%% Haskell code block without a figure box
\lstnewenvironment
  {hscode}
  {\singlespacing\lstset{basicstyle={\ttfamily}, language=Haskell, tabsize=4}}
  {}

%% Haskell code block with a figure box
\lstnewenvironment
  {hscode2}[2]
  {\singlespacing\lstset{basicstyle={\ttfamily}, language=Haskell, tabsize=4, label=#1, caption=#2}}
  {}

%% Loop code block without a figure box
\lstnewenvironment
  {loopcode}
  {\singlespacing\lstset{basicstyle={\ttfamily}, language=Haskell, tabsize=4}}
  {}

%% Loop code block with a figure box
\lstnewenvironment
  {loopcode2}[2]
  {\singlespacing\lstset{basicstyle={\ttfamily}, float=htpb, language=Haskell, tabsize=4, label=#1, caption=#2}}
  {}

\newcommand\thesis\emph

\newcommand\inlc\lstinline

%%%%%%%%%%%%%%%%%%%%%%%%%%%% END Environments.




\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% End of preamble. Don't forget \begin{document} and \fi
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\fi %% Do Not Remove. End of conditional preamble inclusion.


